<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Reseller Panel</title>
  <style>
    body { font-family: sans-serif; background: #111; color: #eee; padding: 20px; }
    .hidden { display: none; }
    input, button { margin: 5px; padding: 8px; }
    .top-bar { display: flex; justify-content: space-between; align-items: center; }
    .product { background: #222; padding: 10px; margin: 10px 0; border-radius: 6px; }
    .admin-tools { margin-top: 20px; }
    .logout-btn { float: right; }
  </style>
</head>
<body>

  <div id="auth-section">
    <h2>Login or Sign Up</h2>
    <input type="text" id="auth-username" placeholder="Username"><br>
    <input type="password" id="auth-password" placeholder="Password"><br>
    <button onclick="login()">Login</button>
    <button onclick="signup()">Sign Up (Reseller)</button>
  </div>

  <div id="panel-section" class="hidden">
    <div class="top-bar">
      <h2>Welcome, <span id="username-display"></span>!</h2>
      <button onclick="logout()" class="logout-btn">Logout</button>
    </div>

    <div id="product-list"></div>

    <div id="admin-controls" class="admin-tools hidden">
      <h3>Add Product</h3>
      <input type="text" id="product-name" placeholder="Product Name">
      <input type="number" id="product-price" placeholder="Price">
      <button onclick="addProduct()">Add Product</button>
    </div>
  </div>

  <script>
    const ADMIN_USERNAME = 'admin';
    const ADMIN_PASSWORD = 'admin123';

    const authSection = document.getElementById('auth-section');
    const panelSection = document.getElementById('panel-section');
    const productList = document.getElementById('product-list');
    const adminControls = document.getElementById('admin-controls');
    const usernameDisplay = document.getElementById('username-display');

    let currentUser = null;

    function signup() {
      const username = document.getElementById('auth-username').value.trim();
      const password = document.getElementById('auth-password').value.trim();

      if (!username || !password) return alert("Fill out both fields!");

      let users = JSON.parse(localStorage.getItem('users')) || {};
      if (users[username]) return alert("User already exists!");

      users[username] = { password, role: 'reseller' };
      localStorage.setItem('users', JSON.stringify(users));
      alert("Signed up! You can now log in.");
    }

    function login() {
      const username = document.getElementById('auth-username').value.trim();
      const password = document.getElementById('auth-password').value.trim();

      if (username === ADMIN_USERNAME && password === ADMIN_PASSWORD) {
        currentUser = { username, role: 'admin' };
        loadPanel();
        return;
      }

      const users = JSON.parse(localStorage.getItem('users')) || {};
      if (!users[username] || users[username].password !== password) {
        return alert("Invalid credentials!");
      }

      currentUser = { username, role: users[username].role };
      loadPanel();
    }

    function logout() {
      currentUser = null;
      panelSection.classList.add('hidden');
      authSection.classList.remove('hidden');
      productList.innerHTML = '';
    }

    function loadPanel() {
      authSection.classList.add('hidden');
      panelSection.classList.remove('hidden');
      usernameDisplay.textContent = currentUser.username;
      if (currentUser.role === 'admin') {
        adminControls.classList.remove('hidden');
      } else {
        adminControls.classList.add('hidden');
      }
      displayProducts();
    }

    function displayProducts() {
      const products = JSON.parse(localStorage.getItem('products')) || [];
      productList.innerHTML = '';
      products.forEach((p, index) => {
        const div = document.createElement('div');
        div.className = 'product';
        div.innerHTML = `<strong>${p.name}</strong> - $${p.price}`;
        if (currentUser.role === 'admin') {
          div.innerHTML += `
            <button onclick="editProduct(${index})">Edit</button>
            <button onclick="deleteProduct(${index})">Delete</button>`;
        }
        productList.appendChild(div);
      });
    }

    function addProduct() {
      const name = document.getElementById('product-name').value.trim();
      const price = parseFloat(document.getElementById('product-price').value);
      if (!name || isNaN(price)) return alert("Enter valid product data!");

      const products = JSON.parse(localStorage.getItem('products')) || [];
      products.push({ name, price });
      localStorage.setItem('products', JSON.stringify(products));
      displayProducts();
    }

    function editProduct(index) {
      const products = JSON.parse(localStorage.getItem('products')) || [];
      const newName = prompt("New name:", products[index].name);
      const newPrice = prompt("New price:", products[index].price);
      if (newName && !isNaN(parseFloat(newPrice))) {
        products[index] = { name: newName, price: parseFloat(newPrice) };
        localStorage.setItem('products', JSON.stringify(products));
        displayProducts();
      }
    }

    function deleteProduct(index) {
      const products = JSON.parse(localStorage.getItem('products')) || [];
      if (confirm("Delete this product?")) {
        products.splice(index, 1);
        localStorage.setItem('products', JSON.stringify(products));
        displayProducts();
      }
    }
  </script>
</body>
</html>
